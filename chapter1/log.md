# 扫盲Log

## 问题一、简述BurpSuite或类似的HTTP流量分析套件如何解决浏览器对于HTTPS中间人的限制

在HTTPS通信的过程中，要经过以下几个过程：

1. 客户端向服务器发送请求
2. 服务器收到客户端的请求将生成的秘钥对中的公钥发送给客户端
3. 客户端收到公钥后对其进行验证，若不通过则抛出异常，若通过则生成一个随机数作为对称加密密码，在用之前协商的公钥对密码进行加密后传输给服务端
4. 服务端收到加密后的密码后用自己的私钥对其进行解密，得到对称加密的秘钥，再将要传输的内容通过对称加密加密后传给客户端。

而中间人攻击则是在服务器客户端的通信双方间插足，中间人必须有自己的证书，且能截获客户端的通信，并伪装成服务器与客户端进行通信。这个过程要求客户端不做证书的检查或者信任该证书。而我们在配置相关工具进行HTTPS流量抓取时需要信任其证书，就完成了对这一条件。一个中间人攻击的HTTPS流程大致如下：

1. 客户端向真正服务器发送请求，该请求被中间人截获。
2. 中间人截获客户端请求后向真正服务器发送请求。
3. 真正服务器接到请求后产生秘钥对并返回公钥。
4. 中间人收到真公钥，并生成自己的秘钥对，将自己的公钥发给客户端。
5. **客户端收到公钥后对其进行验证**，若通过则产生对称加密秘钥，并将该秘钥经公钥加密后发出。
6. 中间人截获加密后的对称加密秘钥，解密后获得与客户端通信的秘钥，并产生与服务器通信的对称加密秘钥，完成对整个通信的劫持。
7. 后续过程就不再说明了。

## 问题二、SYN-Flood攻击的防御

SYN代理：在业务服务器前面假设一个SYN代理，对业务服务器的连接请求首先要经过该代理。

TCP safe reset：客户端首先正常和防火墙连接，连接成功后防火墙reset连接，客户端再重新一次尝试与客户端进行连接。

## 问题三、JS原型链污染攻击

> 参考[JavaScript Prototype 污染攻击](https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html)

需要掌握以下几个问题：

1. JS类的定义
2. JS中的`prototype`、\`proto\`关键字。
3. JS中类的继承如何实现。
4. JS中的原型链。
5. JS原型链污染的原因。
6. JS原型链污染的场景举例。

## 问题四、limit、order by的注入

## 问题五、RPO 相对路径覆盖

这是一种利用相对URL路径覆盖目标文件的攻击手段。它依赖于浏览器和服务器的反应，基于服务器的Web缓存技术和配置差异，以及服务器与客户端浏览器的解析差异，利用前端代码中加载的`css/js`相对路径来加载其他文件，最终将服务器返回的不是`css/js`的文件当做`css/js`文件来解析，从而导致XSS、信息泄露动问题的产生。

比如在web服务器上根目录下存在`html`文件`a.html`，该文件以相对路径的方式加载了`b.js`，如`<script src="b.js">`，那么如果我们在根目录下保存文件`test/b.js`，通过在url栏访问`http://webserver/test/..%2fa.html`就能够实现对`test/b.js`的加载执行。

