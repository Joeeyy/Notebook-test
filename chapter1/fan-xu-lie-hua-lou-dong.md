# 反序列化漏洞

## 定义

序列化：将对象保存为字节。

反序列化：将对象序列化后产生的字节恢复为原来的对象。

## 应用场景

1. 想把内存中的一个对象保存到文件中或者数据库中。
2. 想用套接字在网络上传输对象。
3. 想通过RMI传输对象。

## PHP中的反序列化漏洞

## Java中的反序列化漏洞

### 实现

实现类的Serializable接口。但是，对于一个实现了Serializable接口的类来说，并不一定其中所有的字段或者属性都是可以序列化的，如果该类有父类，则有两种情况：

1. 该父类已经实现了序列化接口，则其父类相应字段或者属性的处理与该类相同。
2. 若该父类未实现序列化接口，则该类父类所有相应字段或者属性都不会被序列化。反序列化时，所有之前未经过序列化的字段或者属性会被按照父类默认的构造函数进行初始化。

另外，如果勒种某个属性被标志位static，则该类不能被序列化。如果该类某个属性被标志位transient，则该类也不能被序列化。如果类的父类实现了序列化接口，子类不必显式实现序列化接口就能够自动获得序列化。当一个对象实例变量引用了其他对象，序列化该对象时也会尝试将被引用的对象进行序列化。

我们可以通过重写`ObjectOutputStream`的`readObject()`和`writeObject()`函数实现对反序列化和序列化的定义。





